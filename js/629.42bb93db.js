"use strict";(self["webpackChunkshopping_cart"]=self["webpackChunkshopping_cart"]||[]).push([[629],{3629:function(t,s,e){e.r(s),e.d(s,{default:function(){return C}});var i=e(3396),r=e(7139),n=e(9242);const a=t=>((0,i.dD)("data-v-2cc08ea9"),t=t(),(0,i.Cn)(),t),u={class:"container"},d={key:0,class:"row py-5 gy-5"},c={class:"col-md-6 text-center text-md-end"},o=["src"],h={class:"col-md-6 text-start px-5"},l={class:"select-form pt-5"},p=a((()=>(0,i._)("label",null,"購買數量:",-1))),b={class:"input-group my-3 w-75"},m={class:"select-button"},g=["disabled"],w={class:"text-danger px-3"},_={class:"py-5"};function y(t,s,e,a,y,v){return(0,i.wg)(),(0,i.iD)("div",u,[y.isLoaded?((0,i.wg)(),(0,i.iD)("div",d,[(0,i._)("div",c,[(0,i._)("img",{class:"img-fluid",src:v.parseImgPath(y.product.pic),alt:"product image"},null,8,o)]),(0,i._)("div",h,[(0,i._)("h3",null,(0,r.zw)(y.product.name),1),(0,i._)("div",null,"NT$"+(0,r.zw)(y.product.price),1),(0,i._)("div",l,[p,(0,i._)("div",b,[(0,i._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:s[0]||(s[0]=(...t)=>v.decrease&&v.decrease(...t))}," − "),(0,i.wy)((0,i._)("input",{type:"text",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=t=>y.number=t)},null,512),[[n.nr,y.number]]),(0,i._)("button",{class:"btn btn-outline-secondary",type:"button",onClick:s[2]||(s[2]=(...t)=>v.increase&&v.increase(...t))}," + ")])]),(0,i._)("div",m,[(0,i._)("button",{class:"btn btn-outline-dark",type:"button",disabled:y.isDisabled,onClick:s[3]||(s[3]=(...t)=>v.addToCart&&v.addToCart(...t))}," 加入購物車 ",8,g),(0,i._)("span",w,(0,r.zw)(y.warning),1)]),(0,i._)("div",_,(0,r.zw)(y.product.desc),1)])])):(0,i.kq)("",!0)])}var v={data(){return{productId:this.$route.params.productId,product:{},number:1,warning:"",isDisabled:!1,isLoaded:!1}},mounted(){this.$axios.get(`/api/products/${this.productId}`).then((t=>{this.product=t.data[0],this.isLoaded=!0})).catch((()=>this.$router.push({name:"404"})))},watch:{number:{handler(t){Number(t)&&this.number<=this.product.quantity&&(this.isDisabled=!1,this.warning="")}}},methods:{parseImgPath(t){return`https://shopping-cart-bn-test.herokuapp.com/img${t}`},increase(){this.cleanNumber(),this.number++,this.number>this.product.quantity&&(this.warning="庫存不足，請調整數量",this.isDisabled=!0)},decrease(){this.cleanNumber(),this.number>1&&this.number--},cleanNumber(){"string"===typeof this.number&&(this.number=Number(this.number.replace(/\D/g,"")))},checkAmount(){if(!Number(this.number))return this.warning="請輸入有效數字",this.isDisabled=!0,!1;if(this.number>this.product.quantity)return this.warning="庫存不足，請調整數量",this.isDisabled=!0,!1;const t=this.$store.state.userCart.find((t=>t.product_id===this.product.id));return!(t&&t.amount+this.number>this.product.quantity)||(this.warning="庫存不足，請調整數量",!1)},addToCart(){this.checkAmount()&&(this.$store.dispatch("addToCart",[this.product.id,Number(this.number)]),this.$swal("已加入購物車"))}}},f=e(89);const k=(0,f.Z)(v,[["render",y],["__scopeId","data-v-2cc08ea9"]]);var C=k}}]);